Uebersicht: Datenstrukturen und Data Tables fuer Unreal Engine 5
Um die im SoA-Editor gepflegten Inhalte in Unreal Engine 5 zu verwenden, sollten fuer jede Datenkategorie passende Blueprint-Structs und Data Tables erstellt werden. Alle Kernmodelle im Repository nutzen ULIDs als Primaerschluessel (`id`) und zusaetzlich sprechende Slugs (`slug`). In UE5 empfiehlt es sich, den `slug` als Row Name zu verwenden (gut lesbar), den ULID-String aber als eigenes Feld in der Struct zu speichern, damit Querverweise stabil bleiben. Importiert wird bevorzugt ueber CSV- oder JSON-Exports, die Feldnamen muessen exakt mit den Struct-Feldern uebereinstimmen. Alle Loesungen bleiben blueprint-only; optionale Enums lassen sich als Blueprint-Enums abbilden, um die Editor-Bedienung zu vereinfachen. Blueprint-Enums muessen die Export-Strings unveraendert uebernehmen, damit CSV/JSON-Importe fehlerfrei greifen.

Kanonische Listen (einmalig, keine Duplikate)
- Enum-Index
- Struct-Index
- DataTable-Index
Hinweis: Alle anderen Abschnitte verweisen nur darauf.

Arbeitsmodus: "Heute zu tun" Checkliste (damit klar ist, wo du stehst)
1) Ein Systemblock auswaehlen (z.B. Stats/Attributes oder Dialogue).
2) Fuer den Block: Blueprint-Enums anlegen (siehe Enum-Index).
3) Struct(s) anlegen und Felder exakt wie Export benennen (siehe Struct-Index).
4) DataTable erstellen und Import testen (1-2 Beispielzeilen, siehe DataTable-Index).
5) Validation-Notiz: Welche IDs verlinken auf andere Tabellen?
6) Im BP_GameDataSubsystem: Cache-Map fuer diesen Block anlegen.
7) Ergebnis markieren: "Block X fertig importiert + gecacht".

Runtime-Architektur (Lyra-inspiriert, Blueprint-only, ohne GAS)
- DataTables sind Import-Quelle, nicht die Runtime-Datenbank.
- Beim Spielstart: DataTables in Registry-Maps cachen (ULID -> Struct, Slug -> Struct).
- Kommunikation ueber Message-Events statt direkte Manager-Aufrufe (entkoppelt).
- SoftObjectReferences fuer Assets (Icons, Portraits, VO) statt harter Pfad-Strings, wo moeglich.

Konkrete Runtime-Bausteine
- BP_GameDataSubsystem: laedt DataTables, baut Cache-Maps, bietet Lookup-Funktionen.
- BP_MessageHub (oder Gameplay Message Subsystem): Events wie FlagChanged, QuestAdvanced, RewardApplied.
- BP_FlagManager/BP_QuestLog: verwalten Zustand, senden Events, reagieren auf Events.

Import-Workflow (Schritt-fuer-Schritt, wiederholbar)
1) Export aus SoA-Editor (CSV oder JSON).
2) Dateien nach `Content/Data/Exports` kopieren.
3) Blueprint-Enum(s) aktualisieren oder neu erstellen (siehe Enum-Index).
4) Struct(s) pruefen: Feldnamen = Export-Spalten (siehe Struct-Index).
5) DataTable importieren oder reimportieren (siehe DataTable-Index).
6) BP_DataImportManager laufen lassen (Validation: fehlende ULIDs, Enum-Mismatch).
7) BP_GameDataSubsystem neu laden, Cache-Maps aktualisieren.
8) Ergebnis notieren: "Import OK" oder "Fehlerliste".

Kommunikationsregeln (damit Systeme nicht verdrahtet sind)
- Keine direkte Manager-zu-Manager-Calls fuer Gameplay-Flows.
- Events senden: FlagChanged, RequirementPassed, QuestCompleted, RewardGranted.
- Listener entscheiden lokal, was sie tun (UI refresh, Inventory update, Story advance).

Empfohlene Reihenfolge fuer Structs + Imports (MVP zuerst)
1) Core: Stats, Attributes, AttributeStatLink
2) Progression: CharacterClasses, TalentTrees, TalentNodes, TalentNodeLinks, Items, Item Stat/Attribute Modifiers
3) Narrative Spine: Flags, Requirements + Link-Tabellen, Quests, StoryArcs, Dialogues, DialogueNodes
4) World: Locations, Characters, Factions, Encounters, Events, Lore, Timelines
5) Combat: Abilities, Ability Links, Effects, Statuses, Combat Profiles
6) Economy: Currencies, Shops, ShopInventory

Enum-Index (kanonisch, 1:1 Export-Strings)
Core:
- EStatCategory: Attribute, Combat, Defense, Magic, Support
- EStatValueType: int, float, percentage
- EStatScalingBehavior: None, Linear, Exponential, Logarithmic, Custom
- EAttributeValueType: int, float
- EAttributeScaling: None, Linear, Exponential, Logarithmic, Custom
- EAttributeStatScale: None, Linear, Exponential, Logarithmic, Custom

Progression:
- ECharacterRole: Tank, Damage, Healer, Support, Hybrid
- ETalentNodeType: Passive, Active, Keystone, Utility
- EItemType: Weapon, Armor, Accessory, Consumable, Tool, Material, Upgrade, Quest, SetPiece, Misc
- EItemRarity: Common, Uncommon, Rare, Epic, Legendary
- EEquipmentSlot: head, chest, legs, feet, hands, belt, ring, amulet, back, main_hand, off_hand, two_hand, accessory, mount, pet
- EWeaponType: Greatsword, Longsword, Shortsword, Dagger, Rapier, Axe, Greataxe, Hammer, Mace, Spear, Polearm, Halberd, Staff, Wand, Tome, Bow, Crossbow, Firearm, Thrown, Unarmed, Shield, Focus, Instrument
- EDamageType: Slashing, Piercing, Blunt, Fire, Water, Air, Earth, Poison, Psychic, Light, Shadow
- EWeaponRangeType: melee, range
- EModifierValueType: Flat, Percentage, Multiplier

Narrative Spine:
- EFlagType: Story Progress, Quest State, Lore Discovery, Item Unlock, NPC Relationship, Companion Progress, Secret Discovery, Shop Unlock, Event Trigger, Other
- EStoryArcType: Main Story, Side Arc, Faction Arc, DLC Arc

World:
- EInteractionRole: Questgiver, Merchant, Trainer, Companion, Story, Background
- EEncounterType: Combat, Dialogue, Event
- EEventType: Encounter, ItemReward, LoreDiscovery, Dialogue, Teleport, ScriptedScene
- EFactionAlignment: Hostile, Neutral, Friendly
- ELocationBiome: Plains, Forest, Cave, Mountain, Desert, Swamp, Coast, Tundra, City, Ruins, Fortress, Sky Isles, Cloud Sea, Crystal Caverns, Magma Veins, Fungal Undergrowth, Abyss
- ELocationBiomeModifier: Arcane, Corrupted, Divine, Shadowed, Dreamlike

Combat:
- EEnemyType: beast, undead, humanoid, elemental, machine, boss, demon, dragon, giant, spirit, emanation, other
- EEnemyAggression: Hostile, Neutral, Friendly
- EEncounterContext: Combat, Interaction
- ECombatSide: Hostile, Friendly, Neutral
- EAbilityType: Active, Passive, Toggle
- EAbilityTargeting: Single, Area, Self, Allies, Enemies
- EAbilityTrigger: On Use, Passive, On Hit, When Damaged, On Kill
- EDamageTypeSource: Weapon, Fixed, None
- EEffectType: Status, Damage, Heal, Modifier, Reflect, Summon, Shield, Control
- EEffectTarget: Self, Enemy, Ally, All, Area
- EEffectValueType: Flat, Percentage, None
- EEffectTriggerCondition: None, On Hit, When Damaged, On Kill, On Cast, Passive
- EStatusCategory: Buff, Debuff, Control, DoT, Other

Economy:
- ECurrencyType: Soft, Premium, Token


Struct-Index (kanonisch, Felder = Export-Spalten)
Core
Struct FStatData:
- id (String) - ULID aus `id`, Originalwert fuer sichere Verknuepfungen.
- slug (String) - sprechender Schluessel.
- name (String) - Anzeigename.
- category (Enum/String) - EStatCategory.
- description (Text).
- value_type (Enum/String) - EStatValueType.
- default_value (Float).
- min_value (Float).
- max_value (Float).
- scaling_behavior (Enum/String) - EStatScalingBehavior.
- applies_to (Array<String>) - Einsatzbereiche.
- icon_path (String).
- tags (Array<String>) - freie Schlagworte.

Struct FAttributeData:
- id (String) - ULID.
- slug (String).
- name (String).
- description (Text).
- value_type (Enum/String) - EAttributeValueType.
- default_value (Float).
- min_value (Float).
- max_value (Float).
- scaling (Enum/String) - EAttributeScaling.
- used_in (Array<String>) - wo die Attribute verwendet werden.
- icon_path (String).
- tags (Array<String>).

Struct FAttributeStatLink:
- id (String) - ULID.
- attribute_id (String) - ULID des Attributes.
- stat_id (String) - ULID des Stats.
- scale (Enum/String) - EAttributeStatScale.
- multiplier (Float) - Skalierungsfaktor.

Progression
Struct FCharacterClassData:
- id (String) - ULID.
- slug (String).
- name (String).
- description (Text).
- role (Enum/String) - ECharacterRole.
- base_stats (Array<Struct>) - FStatValueEntry.
- stat_growth (Array<Struct>) - FStatValueEntry.
- starting_abilities (Array<String>) - Ability-ULIDs.
- preferred_attributes (Array<String>) - Attribute-ULIDs.
- starting_equipment (Array<String>) - Item-ULIDs.
- tags (Array<String>).

Struct FStatValueEntry:
- stat_id (String) - ULID des Stats.
- value (Float) - Basiswert oder Wachstum pro Level.

Struct FTalentTreeData:
- id (String) - ULID.
- slug (String).
- name (String).
- description (Text).
- class_id (String) - ULID einer CharacterClass (optional).
- requirements_id (String) - ULID eines Requirement-Eintrags (optional).
- icon_path (String).
- tags (Array<String>).

Struct FTalentNodeData:
- id (String) - ULID.
- slug (String).
- tree_id (String) - ULID des Talent Trees.
- name (String).
- description (Text).
- node_type (Enum/String) - ETalentNodeType.
- max_rank (Integer).
- point_cost (Integer).
- requirements_id (String) - ULID eines Requirement-Eintrags (optional).
- granted_abilities (Array<String>) - Ability-ULIDs.
- stat_modifiers (Array<Struct>) - FTalentNodeStatModifier.
- attribute_modifiers (Array<Struct>) - FTalentNodeAttributeModifier.
- ui_position (Struct/JSON) - { x, y }.
- tags (Array<String>).

Struct FTalentNodeStatModifier:
- stat_id (String) - ULID des Stats.
- value (Float).
- value_type (Enum/String) - EModifierValueType.

Struct FTalentNodeAttributeModifier:
- attribute_id (String) - ULID des Attributes.
- value (Float).
- scaling (Enum/String) - EAttributeStatScale.

Struct FTalentNodeLink:
- id (String) - ULID.
- tree_id (String) - ULID des Talent Trees.
- from_node_id (String) - ULID des Start-Nodes.
- to_node_id (String) - ULID des Ziel-Nodes.
- min_rank_required (Integer).

Struct FItemData:
- id (String) - ULID.
- slug (String).
- name (String).
- type (Enum/String) - EItemType.
- rarity (Enum/String) - EItemRarity.
- description (Text).
- base_price (Float).
- base_currency_id (String) - ULID einer Currency (optional).
- equipment_slot (Enum/String) - EEquipmentSlot.
- weapon_type (Enum/String) - EWeaponType.
- damage_type (Enum/String) - EDamageType.
- weapon_range_type (Enum/String) - EWeaponRangeType.
- weapon_range (Integer) - numerischer Bereich/Distanzwert (Einheit im Design festlegen).
- effects (Array<String>) - Effekt-ULIDs.
- tags (Array<String>).
- icon_path (String).
- requirements_id (String) - ULID eines Requirement-Eintrags; optional DataTable FRequirementData nutzen.

Struct FItemStatModifierData:
- id (String) - ULID.
- item_id (String) - ULID des Items.
- stat_id (String) - ULID des Stats.
- value (Float).
- value_type (Enum/String) - EModifierValueType.
- scaling_behavior (Enum/String) - EStatScalingBehavior.
- notes (Text).
- order_index (Integer) - Reihenfolge im Item.

Struct FItemAttributeModifierData:
- id (String) - ULID.
- item_id (String) - ULID des Items.
- attribute_id (String) - ULID des Attributes.
- value (Float).
- scaling (Enum/String) - EAttributeStatScale.
- notes (Text).
- order_index (Integer) - Reihenfolge im Item.

Meta
Struct FContentPackData:
- id (String) - ULID.
- slug (String).
- name (String).
- description (Text).
- release_date (String) - ISO (YYYY-MM-DD) oder frei.
- status (String) - z.B. Planned, Released, Archived.
- is_active (Boolean).
- tags (Array<String>).

Narrative Spine
Struct FFlagData:
- id (String) - ULID.
- slug (String).
- name (String).
- description (Text).
- flag_type (Enum/String) - EFlagType.
- default_value (Boolean).
- content_pack_id (String) - ULID eines Content Packs (optional).
- tags (Array<String>).

Struct FRequirementData (optional):
- id (String) - ULID.
- slug (String).
- tags (Array<String>).

Struct FRequirementRequiredFlag:
- id (String) - ULID.
- requirement_id (String) - ULID des Requirement-Satzes.
- flag_id (String) - ULID des Flags.

Struct FRequirementForbiddenFlag:
- id (String) - ULID.
- requirement_id (String) - ULID des Requirement-Satzes.
- flag_id (String) - ULID des Flags.

Struct FRequirementMinFactionReputation:
- id (String) - ULID.
- requirement_id (String) - ULID des Requirement-Satzes.
- faction_id (String) - ULID der Fraktion.
- min_value (Float).

Struct FQuestData:
- id (String) - ULID.
- slug (String).
- title (String).
- description (Text).
- story_arc_id (String) - ULID eines Story-Arcs.
- requirements_id (String) - ULID eines Requirement-Satzes.
- objectives (Array<Struct>) - FQuestObjectiveData.
- flags_set_on_completion (Array<String>) - Flag-ULIDs.
- xp_reward (Float).
- currency_rewards (Array<Struct>) - FRewardCurrencyData.
- reputation_rewards (Array<Struct>) - FRewardReputationData.
- item_rewards (Array<Struct>) - FRewardItemData.
- tags (Array<String>).

Struct FQuestObjectiveData:
- objective_id (String) - interne ID pro Quest.
- description (Text) - Spielertext.
- requirements_id (String) - ULID eines Requirement-Satzes (optional).
- flags_set (Array<String>) - Flag-ULIDs, die bei Abschluss gesetzt werden.

Struct FRewardCurrencyData:
- currency_id (String) - ULID einer Currency.
- amount (Float).

Struct FRewardReputationData:
- faction_id (String) - ULID einer Fraktion.
- amount (Float) - Rufdelta (+/-).

Struct FRewardItemData:
- item_id (String) - ULID eines Items.
- quantity (Integer).

Struct FStoryArcData:
- id (String) - ULID.
- slug (String).
- title (String).
- summary (Text).
- type (Enum/String) - EStoryArcType.
- content_pack_id (String) - ULID eines Content Packs.
- timeline_id (String) - ULID einer Timeline.
- related_quests (Array<String>) - Quest-ULIDs.
- branching (Array<Struct>) - FStoryArcBranchData.
- required_flags (Array<String>) - Flag-ULIDs.
- tags (Array<String>).

Struct FStoryArcBranchOption:
- flag_id (String) - ULID eines Flags.
- next_quest_id (String) - ULID der naechsten Quest.

Struct FStoryArcBranchData:
- quest_id (String) - ULID der Quest.
- branches (Array<Struct>) - FStoryArcBranchOption.

Struct FDialogueData:
- id (String) - ULID.
- slug (String).
- title (String) - interner Titel.
- character_id (String) - ULID eines Characters.
- location_id (String) - ULID einer Location.
- requirements_id (String) - ULID eines Requirement-Satzes.
- description (Text) - Notizen fuer Autoren.
- tags (Array<String>) - Stichwoerter.

Struct FDialogueNodeData:
- id (String) - ULID.
- slug (String).
- dialogue_id (String) - ULID des uebergeordneten Dialogs.
- speaker (String) - Sprecher-Kennung (z.B. Character- oder Player-Slug).
- text (Text) - angezeigter Dialogtext.
- requirements_id (String) - ULID eines Requirement-Satzes (optional).
- choices (Array<Struct>) - FDialogueChoice.
- set_flags (Array<String>) - Flags, die dieser Knoten setzt.
- tags (Array<String>).

Struct FDialogueChoice:
- choice_text (String).
- next_node_id (String).
- requirements_id (String).
- flags_set (Array<String>).

World
Struct FLocationData:
- id (String) - ULID.
- slug (String).
- name (String).
- description (Text).
- biome (Enum/String) - ELocationBiome.
- biome_modifier (Enum/String, optional) - ELocationBiomeModifier.
- region (String) - freie Regionseinteilung.
- level_range (Struct/JSON) - FLevelRange.
- coordinates (Struct/JSON) - FMapCoordinates.
- image_path (String).
- encounters (Array<String>) - Encounter-ULIDs.
- is_safe_zone (Boolean).
- is_fast_travel_point (Boolean).
- has_respawn_point (Boolean).
- tags (Array<String>).

Struct FLevelRange:
- min (Integer).
- max (Integer).

Struct FMapCoordinates:
- x (Float).
- y (Float).

Struct FLocationRouteData:
- id (String) - ULID.
- slug (String) - Row Name (z.B. `northpass_to_highridge`).
- from_location_id (String) - ULID der Quell-Location.
- to_location_id (String) - ULID der Ziel-Location.
- travel_time (Float) - Dauer in Spielstunden/-tagen.
- distance (Float) - Distanz oder Abstraktion fuer UI.
- requirements_id (String) - ULID eines Requirement-Satzes (Blockaden, Ruf, Story).
- encounter_weight_modifier (Float) - Multiplikator fuer Zufallsbegegnungen auf dieser Route.
- cost_currency_id (String, optional) - ULID einer Waehrung fuer Reisekosten.
- cost_amount (Float, optional) - Kostenbetrag.
- flags_unlock (Array<String>) - Flag-ULIDs, die beim Freischalten gesetzt werden.
- flags_lock (Array<String>) - Flag-ULIDs, bei deren Setzen die Route gesperrt wird.
- is_bidirectional (Boolean) - true, wenn dieselben Werte fuer Hin- und Rueckweg gelten; ansonsten zweite Zeile anlegen.
- tags (Array<String>) - Zusaetzliche Metadaten (z.B. `MountainPass`, `RequiresAirship`).

Struct FCharacterData:
- id (String) - ULID.
- slug (String).
- name (String).
- title (String).
- description (Text).
- home_location_id (String) - ULID einer Location (optional).
- faction_id (String) - ULID einer Fraktion.
- class_id (String) - ULID einer CharacterClass (optional).
- level (Integer).
- image_path (String).
- tags (Array<String>).

Struct FInteractionItemForSale:
- item_id (String).
- price (Float).

Struct FInteractionProfileData:
- id (String) - ULID.
- character_id (String) - ULID eines Characters.
- role (Enum/String) - EInteractionRole.
- dialogue_tree_id (String) - ULID eines Dialogs.
- available_quests (Array<String>) - Quest-ULIDs.
- inventory (Array<Struct>) - FInteractionItemForSale.
- flags_set_on_interaction (Array<String>) - Flag-ULIDs.
- tags (Array<String>).

Struct FEncounterParticipant:
- character_id (String).
- contexts (Array<Enum/String>) - EEncounterContext.
- combat_side (Enum/String) - ECombatSide (optional).

Struct FEncounterData:
- id (String) - ULID.
- slug (String).
- name (String).
- description (Text).
- encounter_type (Enum/String) - EEncounterType.
- requirements_id (String) - ULID eines Requirement-Satzes.
- participants (Array<Struct>) - FEncounterParticipant.
- rewards (Struct/JSON) - FEncounterReward.
- tags (Array<String>).

Struct FEncounterReward:
- xp (Float).
- items (Array<Struct>) - FRewardItemData.
- currencies (Array<Struct>) - FRewardCurrencyData.
- reputation (Array<Struct>) - FRewardReputationData.
- flags_set (Array<String>).

Struct FEventData:
- id (String) - ULID.
- slug (String).
- title (String).
- type (Enum/String) - EEventType.
- requirements_id (String) - ULID eines Requirement-Satzes.
- location_id (String) - ULID einer Location.
- lore_id (String) - ULID eines Lore-Eintrags.
- dialogue_id (String) - ULID eines Dialogs.
- encounter_id (String) - ULID eines Encounters.
- item_rewards (Array<Struct>) - FRewardItemData.
- xp_reward (Float).
- currency_rewards (Array<Struct>) - FRewardCurrencyData.
- reputation_rewards (Array<Struct>) - FRewardReputationData.
- flags_set (Array<String>) - Flag-ULIDs.
- tags (Array<String>).
- next_event_id (String) - ULID fuer Ketten-Logik.

Struct FFactionData:
- id (String) - ULID.
- slug (String).
- name (String).
- description (Text).
- alignment (Enum/String) - EFactionAlignment.
- relationships (Map<String, String>) - Zuordnung anderer Fraktionen zu Einstufungen.
- reputation_config (Struct/JSON) - Grenzwerte fuer Rufstufen; als FFactionReputationConfig modellieren.
- tags (Array<String>).
- icon_path (String).

Struct FFactionReputationConfig:
- min (Float) - Minimaler Rufwert (z.B. 0).
- max (Float) - Maximaler Rufwert (z.B. 100).
- thresholds (Struct/JSON) - FFactionReputationThresholds.

Struct FFactionReputationThresholds:
- friendly (Float).
- trusted (Float).
- ally (Float).

Struct FLoreEntryData:
- id (String) - ULID.
- slug (String).
- title (String).
- text (Text).
- location_id (String) - ULID einer Location.
- timeline_id (String) - ULID einer Timeline.
- related_story_arcs (Array<String>) - Story-Arc-ULIDs.
- tags (Array<String>).

Struct FTimelineData:
- id (String) - ULID.
- slug (String).
- name (String).
- description (Text).
- start_year (Integer).
- end_year (Integer).
- tags (Array<String>).

Combat
Struct FAbilityData:
- id (String) - ULID.
- slug (String).
- name (String).
- type (Enum/String) - EAbilityType.
- icon_path (String).
- description (Text).
- resource_cost (Float).
- cooldown (Float).
- targeting (Enum/String) - EAbilityTargeting.
- trigger_condition (Enum/String) - EAbilityTrigger.
- damage_type_source (Enum/String) - EDamageTypeSource.
- damage_type (Enum/String) - EDamageType.
- requirements (Text/JSON) - als Raw JSON-String importieren oder in ein Struct parsen.
- tags (Array<String>).

Struct FAbilityEffectLink:
- id (String) - ULID.
- ability_id (String) - ULID der Ability.
- effect_id (String) - ULID des Effekts.

Struct FAbilityScalingLink:
- id (String) - ULID.
- ability_id (String).
- attribute_id (String).
- multiplier (Float) - Faktor fuer die Skalierung.

Struct FEffectData:
- id (String) - ULID.
- slug (String).
- name (String).
- type (Enum/String) - EEffectType.
- description (Text).
- target (Enum/String) - EEffectTarget.
- duration (Float).
- value_type (Enum/String) - EEffectValueType.
- value (Float).
- attribute_id (String) - optionale ULID eines Attributes.
- scaling_stat_id (String) - optionale ULID eines Stats.
- status_id (String) - optionale ULID eines Status (nur wenn type = Status).
- apply_chance (Float) - Prozentchance fuer Status-Applikation (0-100).
- trigger_condition (Enum/String) - EEffectTriggerCondition.
- stackable (Boolean).
- set_bonus_group (String).
- icon_path (String).
- related_items (Array<String>) - Item-ULIDs.
- tags (Array<String>).

Struct FStatusData:
- id (String) - ULID.
- slug (String).
- name (String).
- category (Enum/String) - EStatusCategory.
- description (Text).
- default_duration (Float).
- stackable (Boolean).
- max_stacks (Integer).
- icon_path (String).
- tags (Array<String>).

Struct FLootEntry:
- item_id (String).
- drop_chance (Float).

Struct FCurrencyReward:
- currency_id (String).
- amount (Float).
- drop_chance (Float).

Struct FReputationReward:
- faction_id (String).
- amount (Float).
- drop_chance (Float).

Struct FCompanionProgression:
- level_cap (Integer).
- xp_multiplier (Float).
- stat_growth (Array<Struct>) - FStatValueEntry.

Struct FCompanionConfig:
- class_id (String) - optionaler Override fuer Combat Class.
- level (Integer) - optionaler Override fuer Startlevel.
- custom_abilities (Array<String>).
- custom_stats (Array<Struct>) - FStatValueEntry.
- progression (Struct) - FCompanionProgression.

Struct FCombatProfileData:
- id (String) - ULID.
- character_id (String) - ULID eines Characters.
- enemy_type (Enum/String) - EEnemyType.
- aggression (Enum/String) - EEnemyAggression.
- custom_stats (Array<Struct>) - FStatValueEntry.
- custom_abilities (Array<String>) - Ability-ULIDs.
- tags (Array<String>).
- loot_table (Array<Struct>) - FLootEntry.
- currency_rewards (Array<Struct>) - FCurrencyReward.
- reputation_rewards (Array<Struct>) - FReputationReward.
- xp_reward (Float).
- related_quests (Array<String>) - Quest-ULIDs.
- companion_config (Struct/JSON) - FCompanionConfig.

Economy
Struct FCurrencyData:
- id (String) - ULID.
- slug (String).
- name (String).
- type (Enum/String) - ECurrencyType.
- description (Text).
- code (String) - z.B. GOLD, GEM.
- symbol (String) - z.B. G, GEM.
- decimal_precision (Integer).
- is_premium (Boolean).
- icon_path (String).
- tags (Array<String>).

Struct FShopData:
- id (String) - ULID.
- slug (String).
- name (String).
- description (Text).
- price_modifier (Float).
- price_multiplier (Float).
- price_override (Float).
- currency_id (String) - ULID einer Currency (optional).
- location_id (String) - ULID einer Location.
- character_id (String) - ULID eines Characters (optional).
- requirements_id (String) - ULID eines Requirement-Datensatzes.
- price_modifiers (Struct/JSON) - Regeln fuer Rabatte/Aufschlaege.
- tags (Array<String>).

Struct FShopInventoryItem:
- id (String) - ULID.
- slug (String) - Row Name (z.B. Kombination aus Shop und Item).
- shop_id (String) - ULID des Shops.
- item_id (String) - ULID des Items.
- price_modifier (Float).
- price_multiplier (Float).
- price_override (Float).
- currency_id (String) - ULID einer Currency (optional).
- stock (Integer) - `-1` oder leer = unbegrenzt.
- requirements_id (String) - ULID eines Requirement-Eintrags.
- tags (Array<String>).

DataTable-Index (kanonisch)
Core:
- stats -> FStatData (RowName: slug) | Quelle: backend/app/models/m_stats.py
- attributes -> FAttributeData (RowName: slug) | Quelle: backend/app/models/m_attributes.py
- attribute_stat_links -> FAttributeStatLink (RowName: id) | Quelle: backend/app/models/m_attribute_stat_link.py

Progression:
- characterclasses -> FCharacterClassData (RowName: slug) | Quelle: backend/app/models/m_characterclasses.py
- talent_trees -> FTalentTreeData (RowName: slug) | Quelle: backend/app/models/m_talent_trees.py
- talent_nodes -> FTalentNodeData (RowName: slug) | Quelle: backend/app/models/m_talent_trees.py
- talent_node_links -> FTalentNodeLink (RowName: id) | Quelle: backend/app/models/m_talent_trees.py
- items -> FItemData (RowName: slug) | Quelle: backend/app/models/m_items.py
- item_stat_modifiers -> FItemStatModifierData (RowName: id) | Quelle: backend/app/models/m_items.py
- item_attribute_modifiers -> FItemAttributeModifierData (RowName: id) | Quelle: backend/app/models/m_items.py

Meta:
- content_packs -> FContentPackData (RowName: slug) | Quelle: backend/app/models/m_content_packs.py

Narrative Spine:
- flags -> FFlagData (RowName: slug) | Quelle: backend/app/models/m_flags.py
- requirements -> FRequirementData (RowName: slug) | Quelle: backend/app/models/m_requirements.py
- requirement_required_flags -> FRequirementRequiredFlag (RowName: id) | Quelle: backend/app/models/m_requirements.py
- requirement_forbidden_flags -> FRequirementForbiddenFlag (RowName: id) | Quelle: backend/app/models/m_requirements.py
- requirement_min_faction_reputation -> FRequirementMinFactionReputation (RowName: id) | Quelle: backend/app/models/m_requirements.py
- quests -> FQuestData (RowName: slug) | Quelle: backend/app/models/m_quests.py
- story_arcs -> FStoryArcData (RowName: slug) | Quelle: backend/app/models/m_story_arcs.py
- dialogues -> FDialogueData (RowName: slug) | Quelle: backend/app/models/m_dialogues.py
- dialogue_nodes -> FDialogueNodeData (RowName: slug) | Quelle: backend/app/models/m_dialogue_nodes.py

World:
- locations -> FLocationData (RowName: slug) | Quelle: backend/app/models/m_locations.py
- location_routes -> FLocationRouteData (RowName: slug) | Quelle: custom export (travel system)
- characters -> FCharacterData (RowName: slug) | Quelle: backend/app/models/m_characters.py
- interaction_profiles -> FInteractionProfileData (RowName: id) | Quelle: backend/app/models/m_interaction_profiles.py
- encounters -> FEncounterData (RowName: slug) | Quelle: backend/app/models/m_encounters.py
- events -> FEventData (RowName: slug) | Quelle: backend/app/models/m_events.py
- factions -> FFactionData (RowName: slug) | Quelle: backend/app/models/m_factions.py
- lore_entries -> FLoreEntryData (RowName: slug) | Quelle: backend/app/models/m_lore_entries.py
- timelines -> FTimelineData (RowName: slug) | Quelle: backend/app/models/m_timelines.py

Combat:
- abilities -> FAbilityData (RowName: slug) | Quelle: backend/app/models/m_abilities.py
- ability_effect_links -> FAbilityEffectLink (RowName: id) | Quelle: backend/app/models/m_abilities_links.py
- ability_scaling_links -> FAbilityScalingLink (RowName: id) | Quelle: backend/app/models/m_abilities_links.py
- effects -> FEffectData (RowName: slug) | Quelle: backend/app/models/m_effects.py
- statuses -> FStatusData (RowName: slug) | Quelle: backend/app/models/m_statuses.py
- combat_profiles -> FCombatProfileData (RowName: id) | Quelle: backend/app/models/m_combat_profiles.py

Economy:
- currencies -> FCurrencyData (RowName: slug) | Quelle: backend/app/models/m_currencies.py
- shops -> FShopData (RowName: slug) | Quelle: backend/app/models/m_shops.py
- shops_inventory -> FShopInventoryItem (RowName: slug) | Quelle: backend/app/models/m_shop_inventory.py

Blueprint-Phasen (Kurz, ohne Duplikate)
Phase 1: Enums anlegen -> siehe Enum-Index.
Phase 2: Structs anlegen -> siehe Struct-Index.
Phase 3: DataTables importieren -> siehe DataTable-Index.
Phase 4: Cache-Maps in BP_GameDataSubsystem (siehe Runtime-Wiring).

Blueprint-To-Do (Character/Profile Block)
- Enums: EInteractionRole, EEnemyType, EEnemyAggression, EEncounterContext, ECombatSide (siehe Enum-Index).
- Structs: FCharacterData, FInteractionProfileData, FInteractionItemForSale, FCombatProfileData, FLootEntry, FCurrencyReward, FReputationReward, FCompanionConfig, FCompanionProgression, FStatValueEntry, FEncounterParticipant, FEncounterData (siehe Struct-Index).
- DataTables: characters, interaction_profiles, combat_profiles, encounters (siehe DataTable-Index).
- Cache-Hinweis: im BP_GameDataSubsystem zusaetzlich Map "CharacterId -> InteractionProfile" und "CharacterId -> CombatProfile" bauen.

UE5 Checkliste (Character/Profile Block)
Ordner-Vorschlag:
- Enums: /Game/Data/Enums
- Structs: /Game/Data/Structs
- DataTables: /Game/Data/Tables
- Exports: /Game/Data/Exports

Cache-Maps in BP_GameDataSubsystem (Startpunkt)
- Map_CharactersById (id -> FCharacterData)
- Map_CharactersBySlug (slug -> FCharacterData)
- Map_CombatProfileByCharacterId (character_id -> FCombatProfileData)
- Map_InteractionProfileByCharacterId (character_id -> FInteractionProfileData)
- Optional: Map_EncounterById/Slug fuer schnelle Lookups

Runtime-Wiring (wo die Structs genutzt werden)
- BP_GameDataSubsystem: laedt DT_Characters, DT_CombatProfiles, DT_InteractionProfiles, DT_Encounters; baut die Maps oben.
- BP_EncounterDirector: fuer jeden Participant -> Character laden; bei Context Combat -> CombatProfile laden; combat_side steuert Team-Zuordnung; enemy_type/aggression/tags an AI weitergeben.
- BP_EnemyBrain: nutzt CombatProfile.tags + enemy_type/aggression fuer Verhalten und Targeting.
- BP_DialogueManager: nutzt FDialogueData.character_id -> Character fuer Namen/Portrait; InteractionProfile fuer Rollen/Flags.
- BP_ShopController/BP_ShopWidget: nutzt FShopData.character_id -> Character (Shopkeeper) und InteractionProfile (Inventory/Role).
- BP_CompanionManager: nutzt CombatProfile.companion_config + progression fuer Begleiter-Setup und Wachstum.

Typische Fehlerbilder (schnell pruefen)
- Enum-Mismatch: Import-Fehler, wenn Enum-Strings nicht exakt stimmen.
- RowName falsch: DataTable zeigt 0 Zeilen oder duplizierte Keys.
- JSON-Arrays nicht geparst: Pruefe, ob Export JSON-Arrays korrekt escaped sind.
- Leere Profile: Participant hat Combat-Context aber kein CombatProfile vorhanden.

Import- und Blueprint-Hinweise
- Arrays/Maps aus JSON lassen sich mit JSON-Data-Table-Import direkt nach UE5 holen. Alternativ CSV-Exports erzeugen, bei denen Array-Felder als `[]`-Schreibweise (JSON) bleiben; UE5 parst diese in `TArray`/`TMap`, wenn die Struct entsprechend definiert ist.
- Fuer alle Enum-Felder lohnt sich ein Blueprint-Enum, dessen Display-Namen exakt den Strings aus den Modellen entsprechen. So verhindert ihr Tippfehler nach dem Import.
- ULIDs bleiben als `FString`. Bei haeufiger Nutzung kann zusaetzlich ein `FName`-Feld (z.B. `IdName`) in der Struct befuellt werden, das per Blueprint in `PreConstruct` gesetzt wird (`Conv_StringToName`), damit Data-Table-Lookups schneller funktionieren.
- Querverweise (z.B. Ability -> Effects, Item -> Requirements, Event -> Encounter) sollten im Blueprint-Code via Helper-Funktionen geloest werden, die ueber die Data Tables anhand der ULID-Strings nachschlagen und bei fehlenden Eintraegen Warnungen ausgeben. Dadurch bleibt der Datenfluss identisch zum Backend.
- Editor-Workflows: Nach einem Export aus dem SoA-Editor CSV/JSON-Dateien in `Content/Data/Exports` legen, `Structs` aktualisieren und `Reimport` auf der jeweiligen Data Table ausfuehren. Prueft die Output-Log auf Fehlermeldungen zu fehlenden Zeilennamen (haeufig Zeichenketten, die nicht exakt mit ULID oder Slug uebereinstimmen).

Status (optional, Import-Fortschritt)
- [DONE] Core: Stats, Attributes, AttributeStatLink
